<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>OSINT_SYSTEM // MANUAL_LOAD</title>
    <style>
        :root {
            --cyan: #00eaff; --dark-blue: #001a20; --black: #050505;
            --warning: #ffb300; --danger: #ff0055; --text-gray: #a0b0b5;
        }
        body { background-color: var(--black); color: var(--cyan); font-family: 'Consolas', monospace; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { width: 90%; max-width: 800px; padding: 40px 0; }
        
        /* Style du bouton de chargement */
        .load-zone {
            border: 2px dashed var(--cyan);
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            background: rgba(0, 234, 255, 0.05);
        }
        
        input[type="file"] { display: none; }
        .custom-file-upload {
            background: var(--cyan);
            color: #000;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
        }

        .search-box { width: 100%; background: var(--dark-blue); border: 1px solid var(--cyan); padding: 15px; color: #fff; outline: none; box-sizing: border-box; display: none; }
        .entry { background: rgba(0, 30, 40, 0.3); border-left: 4px solid var(--cyan); margin-top: 20px; padding: 20px; }
        .entry-content { color: var(--text-gray); white-space: pre-wrap; font-size: 0.9rem; }
        .redacted { background: var(--cyan); color: var(--cyan); user-select: none; }
        #status { font-size: 0.8rem; margin: 10px 0; color: var(--warning); }
    </style>
</head>
<body>

<div class="container">
    <h1>OSINT_LOADER // LOCAL_ACCESS</h1>
    
    <div id="loadZone" class="load-zone">
        <div>S√âCURIT√â NAVIGATEUR : CHARGEMENT MANUEL REQUIS</div>
        <label for="file-upload" class="custom-file-upload">
            üìÅ S√âLECTIONNER LE FICHIER "a.json"
        </label>
        <input id="file-upload" type="file" accept=".json"/>
    </div>

    <input type="text" id="search" class="search-box" placeholder="RECHERCHER DANS LES 15 MO DE DONN√âES...">
    <div id="status">EN ATTENTE DU FICHIER JSON...</div>

    <div id="results"></div>
</div>

<script>
    let db = [];
    const BLACKLIST = ["Dubois", "Hacker"];

    const fileUpload = document.getElementById('file-upload');
    const searchInput = document.getElementById('search');
    const resultsDiv = document.getElementById('results');
    const statusDiv = document.getElementById('status');
    const loadZone = document.getElementById('loadZone');

    // --- LECTURE DU FICHIER PAR L'UTILISATEUR ---
    fileUpload.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        statusDiv.innerText = "LECTURE DU FICHIER EN COURS... PATIENTEZ.";
        
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                db = JSON.parse(e.target.result);
                statusDiv.innerText = `SYST√àME ONLINE - ${db.length} ENTR√âES CHARG√âES`;
                statusDiv.style.color = "var(--cyan)";
                
                // On cache le bouton et on montre la barre de recherche
                loadZone.style.display = 'none';
                searchInput.style.display = 'block';
                searchInput.focus();
            } catch (err) {
                statusDiv.innerText = "ERREUR : FORMAT JSON INVALIDE.";
                statusDiv.style.color = "var(--danger)";
            }
        };
        reader.readAsText(file);
    });

    // --- RECHERCHE ---
    searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        resultsDiv.innerHTML = '';
        if (query.length < 2) return;

        const matches = db.filter(item => {
            const content = (item.nom + " " + (item.prenom || "") + " " + (item.infos || "")).toLowerCase();
            return content.includes(query);
        });

        matches.slice(0, 50).forEach(item => { // Limite √† 50 r√©sultats pour la fluidit√©
            const isCensored = BLACKLIST.some(name => 
                (item.nom && item.nom.toLowerCase().includes(name.toLowerCase())) || 
                (item.prenom && item.prenom.toLowerCase().includes(name.toLowerCase()))
            );

            const entryDiv = document.createElement('div');
            entryDiv.className = `entry ${isCensored ? 'is-censored' : ''}`;

            const displayContent = isCensored 
                ? `<span style="color:var(--danger)">[ CLASSIFI√â ]</span><br><span class="redacted">` + "‚ñà".repeat(100) + `</span>` 
                : (item.infos || "Aucune information suppl√©mentaire.");

            entryDiv.innerHTML = `
                <div style="display:flex; justify-content:space-between; border-bottom:1px solid rgba(0,234,255,0.1); padding-bottom:5px; margin-bottom:10px;">
                    <div style="font-weight:bold">${(item.nom || "NOM").toUpperCase()} ${(item.prenom || "PR√âNOM").toUpperCase()}</div>
                    <div style="font-size:0.7rem; border:1px solid; padding:2px 5px">${item.statut || "N/A"}</div>
                </div>
                <div class="entry-content">${displayContent}</div>
            `;
            resultsDiv.appendChild(entryDiv);
        });
    });
</script>

</body>
</html>